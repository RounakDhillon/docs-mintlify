---
title: Snowflake Connector
description: 'Connect OpenMetadata to Snowflake data warehouse'
---

# Snowflake Connector

Connect OpenMetadata to Snowflake to extract metadata, lineage, and usage information from your data warehouse.

## Prerequisites

- Snowflake account with ACCOUNTADMIN or equivalent privileges
- Network connectivity from OpenMetadata to Snowflake
- Snowflake user with appropriate permissions

## Required Permissions

Create a dedicated role and user for OpenMetadata:

```sql
-- Create role
CREATE ROLE openmetadata_role;

-- Grant necessary privileges
GRANT IMPORTED PRIVILEGES ON DATABASE snowflake TO ROLE openmetadata_role;
GRANT USAGE ON WAREHOUSE compute_wh TO ROLE openmetadata_role;

-- Grant database access
GRANT USAGE ON DATABASE my_database TO ROLE openmetadata_role;
GRANT USAGE ON ALL SCHEMAS IN DATABASE my_database TO ROLE openmetadata_role;
GRANT SELECT ON ALL TABLES IN DATABASE my_database TO ROLE openmetadata_role;
GRANT SELECT ON ALL VIEWS IN DATABASE my_database TO ROLE openmetadata_role;

-- Create user
CREATE USER openmetadata_user
  PASSWORD = 'strong_password'
  DEFAULT_ROLE = openmetadata_role
  DEFAULT_WAREHOUSE = compute_wh;

-- Assign role to user
GRANT ROLE openmetadata_role TO USER openmetadata_user;
```

## Configuration

### Basic Authentication

```yaml
source:
  type: snowflake
  serviceName: snowflake-production
  serviceConnection:
    config:
      type: Snowflake
      account: myaccount.us-east-1
      username: openmetadata_user
      password: strong_password
      warehouse: compute_wh
      database: my_database
      role: openmetadata_role
```

### Key Pair Authentication

```yaml
source:
  type: snowflake
  serviceName: snowflake-keypair
  serviceConnection:
    config:
      type: Snowflake
      account: myaccount.us-east-1
      username: openmetadata_user
      warehouse: compute_wh
      database: my_database
      role: openmetadata_role
      privateKey: |
        -----BEGIN PRIVATE KEY-----
        MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC...
        -----END PRIVATE KEY-----
```

## Usage Analytics

Enable query history for usage statistics:

```sql
-- Grant access to query history
GRANT SELECT ON ACCOUNT_USAGE.QUERY_HISTORY TO ROLE openmetadata_role;
GRANT SELECT ON ACCOUNT_USAGE.ACCESS_HISTORY TO ROLE openmetadata_role;
GRANT SELECT ON ACCOUNT_USAGE.TABLE_CONSTRAINTS TO ROLE openmetadata_role;
```

## Advanced Configuration

### Multi-Database Setup

```yaml
source:
  type: snowflake
  serviceName: snowflake-multi-db
  serviceConnection:
    config:
      type: Snowflake
      account: myaccount.us-east-1
      username: openmetadata_user
      password: strong_password
      warehouse: compute_wh
      includeDatabases:
        - production_db
        - staging_db
        - analytics_db
      excludeDatabases:
        - temp_db
        - test_db
```

## Metadata Extraction

The Snowflake connector extracts:

- **Databases and Schemas**
- **Tables, Views, and External Tables**
- **Columns with data types and constraints**
- **Clustering Keys and Sequences**
- **Stored Procedures and Functions**
- **Tags and Comments**

## Lineage

Snowflake lineage is extracted from:
- **Access History**: Table and column access patterns
- **Query History**: SQL statements and transformations
- **Views**: Underlying table dependencies
- **Stored Procedures**: Data transformations and logic